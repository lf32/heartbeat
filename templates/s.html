{% extends 'base.html' %}
{% block title %} Stego {% endblock %}
{% block body %}
  <form class="box file-upload-form columns" id="c-form" method="POST" enctype="multipart/form-data">
    {{ result.form.hidden_tag() }}
  <ul class="column is-one-third panel px-0 is-shadowless">
    <h3 class="panel-heading title is-size-4 p-3 mb-1 has-background-dark has-text-white">Pick a Tool Elliot!</h3>
    {{ result }}
    <button class="button mt-2 is-fullwidth" style="background: darkred; color: white; font-weight: bold; font-style: italic;" type="submit">Rip The File...</button> 
  </ul>
  <div class="column is-two-third">
      <div class="file has-name is-fullwidth">
        <label class="file-label">
          {{ result.form.file(class="file-input", accept="image/*") }}
          <span class="file-cta">
            <span class="file-icon">
              <i class="fas fa-upload"></i>
            </span>
            <span class="file-label">
              Choose a fileâ€¦
            </span>
          </span>
          <span class="file-name"></span>
        </label>
      </div>
      <br>
      {% if result.output %}
        {% include 'stego_detail.html' %}
      {% endif%}
  </div>
  </form>
{% endblock %}

{% block script %}
  <script type="text/javascript">
    const fileInput = document.querySelector('.file-input');
    fileInput.onchange = updateFile;

    function updateFile() {
      const fileName = document.querySelector('.file-name');
      if (fileInput.files.length > 0) {
        fileName.classList.remove('is-hidden')
        fileName.innerHTML = fileInput.files[0].name;
      }
    }
  </script>
{% endblock %}
